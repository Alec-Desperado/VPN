#!name=ðŸ–¥ï¸ General Enhanced ðŸŒ
#!desc=(ðŸ–¥ï¸ iOS edition) 1.Override the content of the skip-agent segment 2.Add the return of real IP segment content 3. Add non-MitM domain names to prevent interruption of the connection
#!author=
#!updated=2025-06-06 22:41:54 UTC
#!homepage=
#!moduleurl=https://raw.githubusercontent.com/Alec-Desperado/VPN/refs/heads/main/modules/General.iOS.sgmodule
#!icon=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Bypass.png
#!category=General

[General]
# > Skip Proxy
# By skipping a domain name or IP segment, these destination hosts will not be processed by Surge Proxy.
# (In the macOS version, if Set as System Proxy is enabled, these values are written to the system network proxy settings.)
skip-proxy = %APPEND% 192.168.0.0/16,10.0.0.0/8,172.16.0.0/12,127.0.0.0/8,169.254.0.0/16,100.64.0.0/10,192.0.0.0/24,192.88.99.0/24,224.0.0.0/4,233.252.0.0/24,239.255.255.250/32,255.255.255.255/32,::1/128,::ffff:0:0:0/96,::ffff:0:0/96,100::/64,2001::/32,2001:20::/28,2001:db8::/32,2002::/16,3fff::/20,5f00::/16,64:ff9b::/96,64:ff9b:1::/48,fc00::/7,fe80::/10,ff00::/8,localhost,*.lan,*.local,*.internal,ntp.*.com,time.*.com,*.apple-cloudkit.com,*.apple-mapkit.com,*.apple.com,*.apple,*.cdn-apple.com,*.icloud-content.com,*.icloud.com,*.itunes.com,*.mzstatic.com,*.safebrowsing.apple,appldnld.apple.com.edgesuite.net,apple-relay.cloudflare.com,apple-relay.fastly-edge.com,captive.apple.com,cp4.cloudflare.com,*.tbank.ru,*.tinkoff.ru,*.cdn-tinkoff.ru,*.tinkoffjournal.ru,localhost.ptlogin2.qq.com,localhost.sec.qq.com,localhost.work.weixin.qq.com

tun-excluded-routes = %APPEND% 192.168.0.0/16,10.0.0.0/8,172.16.0.0/12,127.0.0.0/8,169.254.0.0/16,100.64.0.0/10,192.0.0.0/24,192.88.99.0/24,224.0.0.0/4,233.252.0.0/24,239.255.255.250/32,255.255.255.255/32,::1/128,::ffff:0:0:0/96,::ffff:0:0/96,100::/64,2001::/32,2001:20::/28,2001:db8::/32,2002::/16,3fff::/20,5f00::/16,64:ff9b::/96,64:ff9b:1::/48,fc00::/7,fe80::/10,ff00::/8,localhost,*.lan,*.local,*.internal,ntp.*.com,time.*.com,*.apple-cloudkit.com,*.apple-mapkit.com,*.apple.com,*.apple,*.cdn-apple.com,*.icloud-content.com,*.icloud.com,*.itunes.com,*.mzstatic.com,*.safebrowsing.apple,appldnld.apple.com.edgesuite.net,apple-relay.cloudflare.com,apple-relay.fastly-edge.com,captive.apple.com,cp4.cloudflare.com,*.tbank.ru,*.tinkoff.ru,*.cdn-tinkoff.ru,*.tinkoffjournal.ru,localhost.ptlogin2.qq.com,localhost.sec.qq.com,localhost.work.weixin.qq.com

# > Always Real IP Hosts
# When the Surge VIF handles DNS issues, this option requires the Surge to return a real IP address instead of a fake IP address.
# DNS packets will be forwarded to the upstream DNS server.
always-real-ip = %APPEND% localhost,*.lan,*.local,*.internal,ntp.*.com,time.*.com,*.apple-cloudkit.com,*.apple-mapkit.com,*.apple.com,*.apple,*.cdn-apple.com,*.icloud-content.com,*.icloud.com,*.itunes.com,*.mzstatic.com,*.safebrowsing.apple,appldnld.apple.com.edgesuite.net,apple-relay.cloudflare.com,apple-relay.fastly-edge.com,captive.apple.com,cp4.cloudflare.com,*.tbank.ru,*.tinkoff.ru,*.cdn-tinkoff.ru,*.tinkoffjournal.ru,localhost.ptlogin2.qq.com,localhost.sec.qq.com,localhost.work.weixin.qq.com

# [MITM]
# Domains that are not MitM and should not be disconnected
# hostname = %INSERT% -*.facebook.com, -*.instagram.com, -*.twitter.com, -*.snssdk.com, -*.pstatp.com
# hostname-disabled = %INSERT% gateway.icloud.com, gateway.icloud.com.cn, weather-data.apple.com, buy.itunes.apple.com, ios.chat.openai.com
