#
[General]
# Workaround system. If you disable this option, it may cause some system issues such as delayed push notifications.
bypass-system = true

# Enable IPv6 support. false means not enabled, true means enabled.
ipv6 = true

# Prefer IPv6. Prioritize querying the IPv6 DNS server for AAAA records and using AAAA records first; false means not enabled.
prefer-ipv6 = false

# Private IP response. If this option is not enabled, domain name resolution returns a private IP address, and Shadowrocket will consider the domain name captured and force a proxy.
private-ip-answer = true

# The domain name resolves directly using system DNS; false means not enabled.
dns-direct-system = false

# Use system DNS after a DNS resolution failure; false means not enabled.
dns-fallback-system = false

# Use proxy server after direct connection domain name resolution fails; false means not enabled.
dns-direct-fallback-proxy = true

# Override DNS. Override the system default DNS using normal DNS or encrypted DNS (e.g. doh, doq, dot, etc.).
# Some DNS over https support http3, so try querying and switching to http3 if it is supported. You can add #no-h3 after the doh link to close it.
# Adguard DNS with ad blocking are used.
dns-server = https://1.1.1.1/dns-query,https://8.8.8.8/dns-query,https://dns.adguard-dns.com/dns-query,tls://dns.comss.one

# Альтернативный DNS. Возврат к резервному DNS при сбое разрешения перезаписанного DNS.
# Если вам нужно указать несколько DNS, их можно разделить запятыми. system означает возврат к системному DNS.
# Вы можете выбрать альтернативный DOH/DOT — https://github.com/curl/curl/wiki/DNS-over-HTTPS
# fallback-dns-server = https://cloudflare-dns.com/dns-query, https://freedns.controld.com/p3
fallback-dns-server = https://cloudflare-dns.com/dns-query,https://unfiltered.adguard-dns.com/dns-query,https://1.1.1.1/dns-query,https://8.8.8.8/dns-query,tls://dns.comss.one,https://dns.comss.one/dns-query

# DNS Rewrite. Some devices or software always use hard-coded DNS servers, for example Netflix sends requests through Google DNS (8.8.8.8.8 or 8.8.4.4). You can use this option to intercept requests.
hijack-dns = :53,:853,8.8.8.8:53,8.8.8.8:853,8.8.4.4:53,8.8.4.4:853,

# Skip Proxy. This option forces the connection ranges for these domain names or IP addresses to be handled by the Shadowrocket TUN interface rather than by the Shadowrocket proxy server. This option is used to resolve some compatibility issues with some applications.
skip-proxy = 192.168.0.0/16,10.0.0.0/8,172.16.0.0/12,localhost,*.local,*.apple.com,*.icloud.com,captive.apple.com,*.tinkoff.ru,*.tinkoffjournal.ru,*.cdn-tinkoff.ru

# TUN Bypass Routing. The Shadowrocket TUN interface supports only the TCP protocol.
# Use this option to bypass the specified IP address range, allowing other protocols to pass through.
tun-excluded-routes = 10.0.0.0/8,100.64.0.0/10,127.0.0.0/8,169.254.0.0/16,172.16.0.0/12,192.0.0.0/24,192.0.2.0/24,192.88.99.0/24,192.168.0.0/16,198.51.100.0/24,203.0.113.0/24,224.0.0.0/4,255.255.255.255/32,239.255.255.250/32

# TUN contains routes. By default, the Shadowrocket interface announces itself as the default route, but because of the lesser routing of the Wi-Fi interface, some traffic may not pass through the Shadowrocket interface. Use this option to add a smaller routing table.
tun-included-routes =
# Always use a real IP address, this option requires Shadowrocket to process DNS queries in TUN and return a real IP address instead of a spoofed IP address.
always-real-ip = time.*.com,ntp.*.com,*.cloudflareclient.com,localhost.sec.qq.com,localhost.ptlogin2.qq.com,localhost.work.weixin.qq.com,*.apple.com,*.icloud.com

# Ping packets automatically reply. # TODO: Check
icmp-auto-reply = true

# If the REJECT policy is not enabled, by default it will take effect only in configuration mode. Once enabled, the policy can become effective in other global routing modes.
always-reject-url-rewrite = false

# If the UDP traffic matches a host policy that does not support UDP forwarding in rules, reselect the backup behavior. Additional behavior options include DIRECT and REJECT. DIRECT means forward UDP traffic directly, and REJECT means refuse to forward UDP traffic.
udp-policy-not-supported-behaviour = REJECT

# URL to update the configuration file
update-url = https://raw.githubusercontent.com/Alec-Desperado/VPN/refs/heads/main/main.conf

# Choose the fastest server for proxy
# [Proxy Group]
# AUTO = url-test,interval=600,timeout=5,url=https://cp.cloudflare.com/generate_204,policy-regex-filter=*

# Optional. Add these addresses in the program settings Settings → GeoLite2 Database
# If you do not have a Maxmind account and you are using the Proxy or Auto final rule
country: https://git.io/GeoLite2-Country.mmdb
asn: https://github.com/P3TERX/GeoLite.mmdb/raw/download/GeoLite2-ASN.mmdb

[Host]
*.apple.com=server:system
*.cdn-apple.com=server:system
*.icloud.com=server:system
*.icloud-content.com=server:system
localhost = 127.0.0.1

[URL Rewrite]
^https?://(www.)?nnmclub.to https://nnmclub.to 302
^http://(www.)?yandex.ru https://www.ya.ru 302
^https?://(www.)?google.ru https://www.google.com 302