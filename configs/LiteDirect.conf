
# NAME: LiteDirect
# UPDATED: 2026-02-12 20:18:50 UTC

# ---- ---- ----

# ShadowRocket site: https://shadowlaunch.com/

[General]

# Bypass system. If this option is disabled, it may cause some system issues such as push notification delays.
bypass-system = true


# Skip Proxy. This option forces connections to these domains or
# IP ranges to be handled by the Shadowrocket TUN interface instead of the Shadowrocket proxy server.
# This option is used to resolve some compatibility issues with some applications.
#
# Skip the proxy interface and use the TUN interface instead.
# This option causes the domain name or IP range in the list to be handled by the Shadowrocket TUN interface
# instead of the Shadowrocket proxy server interface.
# This option is used to improve the compatibility of some applications with proxy environments.
# If TUN mode is enabled, all connections will be forced to be handled by TUN.
# The list of addresses here can be ignored.
skip-proxy = 192.168.0.0/16,10.0.0.0/8,172.16.0.0/12,127.0.0.0/8,100.64.0.0/10,169.254.0.0/16,255.255.255.255/32,192.0.0.0/24,198.18.0.0/15,192.0.2.0/24,198.51.100.0/24,203.0.113.0/24,192.88.99.0/24,224.0.0.0/4,239.255.255.250/32,213.59.192.0/18,212.193.144.0/20,localhost,*.lan,*.local,*.localdomain,captive.apple.com,imap.gmail.com,smtp.gmail.com,*.mos.ru,*.gosuslugi.ru,*.gov.ru,*.tbank.ru,*.tinkoff.ru,*.cdn-tinkoff.ru,*.mts.ru,*.mtsgsm.com

# TUN Bypass Routing. The Shadowrocket TUN interface supports only the TCP protocol.
# Use this option to bypass the specified IP address range, allowing other protocols to pass through.
tun-excluded-routes = 192.168.0.0/16,10.0.0.0/8,172.16.0.0/12,127.0.0.0/8,100.64.0.0/10,169.254.0.0/16,255.255.255.255/32,192.0.0.0/24,198.18.0.0/15,192.0.2.0/24,198.51.100.0/24,203.0.113.0/24,192.88.99.0/24,224.0.0.0/4,239.255.255.250/32,213.59.192.0/18,212.193.144.0/20,::1/128,fc00::/7,fe80::/10,::ffff:0:0/96,::ffff:0:0:0/96,100::/64,2001::/32,2001:20::/28,2002::/16,5f00::/16,64:ff9b::/96,64:ff9b:1::/48,ff00::/8

# Always use a real IP address, this option requires the Shadowrocket to process DNS queries in TUN and return a real IP address instead of a spoofed IP address.
always-real-ip = *
# always-real-ip = *.lan,*.localdomain,*.direct,ntp.*.com,time.*.com,captive.apple.com,*.cloudflareclient.com,*.yandex-bank.net,*.tbank.ru,*.tinkoff.ru,*.mts.ru,*.mtsbank.ru

# This option allows you to return a fake IP address, such as "stun-response-ip=1.1.1.1", "stun-response-ipv6=::1",
# to prevent real IP address leakage and enhance WebRTC security. leakage and enhance WebRTC privacy and security.
stun-response-ip=1.1.1.1
stun-response-ipv6=::1


# Override DNS. Override the system default DNS using normal DNS or encrypted DNS (e.g. doh, doq, dot, etc.).
# Shadowrocket uses parallel requests to resolve queries, and the first result returned will be used.
# DNS Override only resolves directly connected domain names, while proxy domain names will be resolved through a proxy server.
# Some DNS over https support http3, so try querying and switching to http3 if it is supported. You can add #no-h3 after the doh link to close it.
# dns-server = tls://1.0.0.2,tls://1.1.1.2,tls://1.0.0.3,tls://1.1.1.3,tls://1.0.0.1,tls://1.1.1.1,tls://8.8.4.4,tls://8.8.8.8
dns-server = tls://4a11332c.d.adguard-dns.com,quic://4a11332c.d.adguard-dns.com,https://d.adguard-dns.com/dns-query/4a11332c
# proxy-dns-server =

# Alternate DNS. Returns to the backup DNS when the resolution of the overwritten DNS fails.
# If you need to specify multiple DNSs, you can separate them with commas. system means return to the system DNS.
# You can choose an alternative DOH/DOT - https://github.com/curl/curl/wiki/DNS-over-HTTPS
# fallback-dns-server = tls://dns.quad9.net,tls://dns.google,https://1.0.0.1/dns-query#proxy=proxy,https://1.1.1.1/dns-query#proxy=proxy,https://8.8.8.8/dns-query#proxy=proxy,tls://2606:4700:4700::1001,tls://2606:4700:4700::1111
fallback-dns-server = tls://1.0.0.2,tls://1.1.1.2,tls://1.0.0.3,tls://1.1.1.3,tls://1.0.0.1,tls://1.1.1.1,tls://8.8.4.4,tls://8.8.8.8

# Enable full IPv6 support. false means not enabled, true means enabled.
ipv6 = true

# Prefer IPv6. Prioritize querying the IPv6 DNS server for AAAA records and using AAAA records first; false means not enabled.
prefer-ipv6 = false

# The domain name resolves directly using system DNS; false means not enabled.
dns-direct-system = false

# Ping packets automatically reply.
icmp-auto-reply = false  # true

# If the REJECT policy is not enabled, by default it will take effect only in configuration mode. Once enabled, the policy can become effective in other global routing modes.
always-reject-url-rewrite = false

# Private IP response. If this option is not enabled, domain name resolution returns a private IP address, and Shadowrocket will consider the domain name captured and force a proxy.
private-ip-answer = true

# Use system DNS after a DNS resolution failure; false means not enabled.
dns-fallback-system = false

# Use proxy server after direct connection domain name resolution fails; false means not enabled.
dns-direct-fallback-proxy = true

# If the UDP traffic matches a host policy that does not support UDP forwarding in rules, reselect the backup behavior. Additional behavior options include DIRECT and REJECT. DIRECT means forward UDP traffic directly, and REJECT means refuse to forward UDP traffic.
udp-policy-not-supported-behaviour = REJECT

# By default, DNS lookup is always performed on the remote server with a proxy policy.
# If true, Shadowrocket will use the mapped address for the proxy connection instead of the host if a local DNS mapping exists.
use-local-host-item-for-proxy = false

# DNS Rewrite. Some devices or software always use hard-coded DNS servers, for example Netflix sends requests through Google DNS (8.8.8.8.8 or 8.8.4.4). You can use this option to intercept requests.
hijack-dns = :53,:853,8.8.8.8:53,8.8.8.8:853,8.8.4.4:53,8.8.4.4:853,1.1.1.1:53,1.1.1.1:853,1.0.0.1:53,1.0.0.1:853,9.9.9.9:53,9.9.9.9:853

# TUN contains routes. By default, the Shadowrocket interface announces itself as the default route, but because of the lesser routing of the Wi-Fi interface, some traffic may not pass through the Shadowrocket interface. Use this option to add a smaller routing table.
# tun-included-routes =

# ðŸ’¡ Network compatibility mode. `0 -> Disable`; `1 -> Proxy with Loopback Address`; `2 -> Proxy Only`; `3 -> TUN Only`; `4 -> Proxy without Loopback Address`; `5 -> No default route`. The effect when the value of the parameter is set to `3` is equivalent to enabling [Tun Mode]: Settings > Proxy > Proxy Type > None. Setting this parameter to 5 is equivalent to enabling [Compatibility Mode]: [Settings] (#Settings Page) > Proxy > [Compatibility Mode]
compatibility-mode = 5

# Automatically close the proxy connection when the proxy chain is missing; false means not enabled.
close-if-proxy-chain-missing = true

# If the device receives only IPv6 DNS but not IPv4 DNS in the network environment, the software considers the network environment to be an "IPv6-only" network and enables this command when the value is true.
# ipv6-only-if-no-ipv4-dns = true

# QUIC Protocol Blocking Policy. Supports configuring the QUIC transport layer protocol using all-proxy, all, and always-allow.
# Specifically:
# *   `all-proxy` blocks QUIC only for connections using a proxy; direct connections (DIRECT) remain unaffected.
# *   `all` blocks QUIC for all connections (including both direct and proxy connections), effectively prohibiting all UDP/443 traffic within the system.
# *   `always-allow` permits QUIC at all times without any blocking, equivalent to "disabling QUIC blocking."
# block-quic = all-proxy

# Hide VPN Icon (off by default)
hide-vpn-icon = true

# Test timeout (seconds)
test-timeout = 5
# Internet Test URL
internet-test-url = http://www.gstatic.com/generate_204
# Proxy URL
proxy-test-url = http://cp.cloudflare.com/generate_204

# Optional. Add these addresses in the program settings Settings â†’ GeoLite2 Database
# If you do not have a Maxmind account and you are using the Proxy or Auto final rule
# country: https://git.io/GeoLite2-Country.mmdb or https://raw.githubusercontent.com/Loyalsoldier/geoip/release/Country.mmdb
# asn: https://github.com/P3TERX/GeoLite.mmdb/raw/download/GeoLite2-ASN.mmdb


# ---- ---- ----

# URL to update the configuration file
update-url = https://raw.githubusercontent.com/Alec-Desperado/VPN/refs/heads/main/configs/LiteDirect.conf

include = sr_ru_extended.conf

# ---- ---- ----
# Selecting the fastest proxy server
# [Proxy Group]
# AUTO = url-test,interval=600,timeout=5,url=https://cp.cloudflare.com/generate_204,policy-regex-filter=*
# ---- ---- ----


[Rule]

# The logical rule for these two ANDs is to prevent issues
# that could cause module scripts to fail if a Spotify or YouTube related request goes UDP.
AND,((PROTOCOL,UDP),(DEST-PORT,443),(DOMAIN-SUFFIX,googlevideo.com)),REJECT-NO-DROP
AND,((PROTOCOL,UDP),(DEST-PORT,443),(DOMAIN,spclient.wg.spotify.com)),REJECT-NO-DROP

# Direct Gmail
AND,((OR,((DOMAIN-SUFFIX,imap.gmail.com),(GEOIP,GOOGLE,no-resolve))),(DEST-PORT,993)),DIRECT
AND,((OR,((DOMAIN-SUFFIX,smtp.gmail.com),(GEOIP,GOOGLE,no-resolve))),(DEST-PORT,587)),DIRECT

# Explanation for blocking UDP traffic on port 443: HTTP3/QUIC protocols are becoming popular,
# but domestic ISPs and international locations have low UDP priority,
# they don't work well and are blocked to force a return to HTTP2/HTTP1.1.
# (If you need to enable this logical rule, remove the # comment character before AND).
# AND,((PROTOCOL,UDP),(DST-PORT,443)),REJECT-NO-DROP

# Preventing application loop requests
IP-CIDR,0.0.0.0/32,REJECT,no-resolve

GEOIP,PRIVATE,DIRECT,no-resolve
GEOIP,LAN,DIRECT,no-resolve

RULE-SET,https://raw.githubusercontent.com/Alec-Desperado/VPN/refs/heads/main/domains/groups/group-rules-private.list,DIRECT

RULE-SET,https://raw.githubusercontent.com/Alec-Desperado/VPN/refs/heads/main/domains/groups/group-rules-all-reject.list,REJECT,pre-matching,extended-matching

RULE-SET,https://raw.githubusercontent.com/Alec-Desperado/VPN/refs/heads/main/domains/groups/group-rules-proxy.list,PROXY

RULE-SET,https://raw.githubusercontent.com/Alec-Desperado/VPN/refs/heads/main/domains/groups/group-rules-direct.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/Alec-Desperado/VPN/refs/heads/main/domains/groups/group-rules-perplexity.list,DIRECT

RULE-SET,https://raw.githubusercontent.com/Alec-Desperado/VPN/refs/heads/main/domains/groups/group-rules-ai.list,PROXY

# If you enable RULE-SET group-rules-social-media, VK will go through proxy.
#RULE-SET,https://raw.githubusercontent.com/Alec-Desperado/VPN/refs/heads/main/domains/vk.list,DIRECT
#RULE-SET,https://raw.githubusercontent.com/Alec-Desperado/VPN/refs/heads/main/domains/groups/group-rules-ru.list,DIRECT

[Rule]
FINAL,DIRECT

[Host]

# --- CUSTOM HOSTS ---
# > Local
localhost = 127.0.0.1
router.lan=10.111.1.1
router.localdomain=10.111.1.1
dns.local=10.111.1.1

# > IPv6
# ip6-localhost = ::1 // IPv6 Localhost
# ip6-loopback = ::1 // IPv6 Loopback
# ip6-localnet = fe00::0 // IPv6 Link-Local
# ip6-mcastprefix = ff00::0 // IPv6 Multicast
# ip6-allnodes = ff02::1 // IPv6 All Nodes
# ip6-allrouters = ff02::2 // IPv6 All Routers
# ip6-allhosts = ff02::3 // IPv6 All Hosts

# --- CUSTOM DNS ---

# > Apple DNS
## refer: https://support.apple.com/zh-cn/HT210060
# networking.apple = server:https://doh.dns.apple.com/dns-query
# *.networking.apple = server:https://doh.dns.apple.com/dns-query
# *.www-cdn.icloud.com.akadns.net = server:https://doh.dns.apple.com/dns-query
## Apple.com
# *.apple.com = server:system
## iCloud.com
# *.icloud.com = server:system
# *.me.com = server:https://doh.dns.apple.com/dns-query
##
# *.netcts.cdn-apple.com = server:https://doh.dns.apple.com/dns-query
# *.apple-mapkit.com = server:https://doh.dns.apple.com/dns-query
##
# *.apple=server:system
# *.apple-cloudkit.com=server:system
# *.cdn-apple.com=server:system
# *.icloud-content.com=server:system
# *.itunes.com=server:system

# > Alphabet
# refer: https://developers.google.com/speed/public-dns/docs/doh

# > Cloudflare
# refer: https://developers.cloudflare.com/1.1.1.1/encryption/dns-over-https/make-api-requests/

# > Encrypted DNS
cloudflare-dns.com = 104.16.249.249, 104.16.248.249, 2606:4700::6810:f8f9, 2606:4700::6810:f9f9 // https://cloudflare-dns.com/dns-query
1dot1dot1dot1.cloudflare-dns.com = 1.1.1.1, 1.0.0.1, 2606:4700:4700::1001, 2606:4700:4700::1111 // 1dot1dot1dot1.cloudflare-dns.com:853
one.one.one.one = 1.1.1.1, 1.0.0.1, 2606:4700:4700::1001, 2606:4700:4700::1111  // one.one.one.one:853
dns.google = 8.8.8.8, 8.8.4.4, 2001:4860:4860::8888, 2001:4860:4860::8844 // https://dns.google/dns-query
dns64.dns.google = 2001:4860:4860::6464, 2001:4860:4860::64 // https://dns64.dns.google/dns-query

# > Router/system DNS
*.lan = server:system
*.home.arpa = server:system
*.in-addr.arpa = server:system

# *.repeater.asus.com = server:system
# *.router.asus.com = server:system
# *.asusrouter.com = server:system
# *.routerlogin.net = server:system
# *.tendawifi.com = server:system
# *.tplinkwifi.net = server:system
# *.tplogin.cn = server:system
# *.tplinkap.net = server:system
# *.tplinkeap.net = server:system
# *.tplinklogin.net = server:system
# *.tplinkmodem.net = server:system
# *.tplinkplclogin.net = server:system
# *.tplinkrepeater.net = server:system
# *.www.miwifi.com = server:system
# *.mediarouter.home = server:system
# *.miwifi.com = server:system
# *.zte.home = server:system
# *.ui.direct = server:system
# *.hiwifi.com = server:system
# *.huaweimobilewifi.com = server:system
# *.my.router = server:system
# *.routerlogin.com = server:system
# *.samsung.router = server:system
# *.router.synology.com = server:system

# > Rus
*.tbank.ru=server:system
*.mts.ru=server:system
*.emias.info=server:system
*.gosuslugi.ru=server:system
*.gov.ru=server:system
*.mos.ru=server:system
*.mosreg.ru=server:system
*.nalog.ru=server:system
#[URL Rewrite]
#^https?://(www.)?nnmclub.to https://nnmclub.to 302
#^https?://(www.)?yandex.ru https://www.ya.ru 302
#^https?://(www.)?google.ru https://www.google.com 302

#[MITM]
#hostname = *.google.ru,*.yandex.ru,*.nnmclub.to
